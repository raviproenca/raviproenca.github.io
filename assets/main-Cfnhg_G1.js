import{a as o}from"./index-C1WVuFIU.js";const s="https://locadora-ryan-back.altislabtech.com.br",l=async({email:i,password:r})=>{try{const a=await o.post(`${s}/auth/login`,{email:i,password:r});return a.data.token&&localStorage.setItem("token",a.data.token),localStorage.setItem("loginEmail",i),a.data}catch(a){n(a)}},n=i=>{throw i.response?new Error(i.response.data?.message||"Erro de resposta da API."):i.request?new Error("Sem resposta do servidor. Verifique sua conexão."):new Error("Erro ao realizar requisição: "+i.message)},m=document.getElementById("form-login"),t=document.getElementById("login-email"),e=document.getElementById("login-password");t.addEventListener("input",()=>{t.validity.typeMismatch||t.value.trim().length<7||t.value.trim().length>50?t.setCustomValidity("Por favor, insira um email válido."):t.setCustomValidity("")});e.addEventListener("input",()=>{e.value.trim().length<8?e.setCustomValidity("A senha deve possui no mínimo 8 dígitos"):e.value.trim().length>30?e.setCustomValidity("Por favor, insira uma senha válida."):e.setCustomValidity("")});m.addEventListener("submit",async i=>{if(i.preventDefault(),!t.value.trim()){t.setCustomValidity("O email é obrigatório."),t.reportValidity();return}if(!e.value.trim()){e.setCustomValidity("A senha é obrigatória."),e.reportValidity();return}if(t.validity.typeMismatch||t.value.trim().length<7||t.value.trim().length>50){t.setCustomValidity("Por favor, insira um email válido."),t.reportValidity();return}if(e.value.trim().length<8)e.setCustomValidity("A senha deve possui no mínimo 8 dígitos");else if(e.value.trim().length>30){e.setCustomValidity("Por favor, insira uma senha válida."),e.reportValidity();return}const r={email:t.value.trim(),password:e.value.trim()};try{await l(r),window.location.href="/views/usuarios.html"}catch(a){console.error("Erro ao fazer login:",a),alert(a.message||"Erro ao fazer login.")}});
